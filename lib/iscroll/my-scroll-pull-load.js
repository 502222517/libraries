!function(a,b){"use strict";var c={probeType:2,useTransition:!0,momentum:!0,bounce:!0,startY:0,t:"2015-11-03"},d={isEmptyScroll:!0,hasPullUp:!0,hasPullDown:!0,pullHeight:50,upElHeight:0,downElHeihgt:0,downText:"下拉刷新数据",downLoadText:"释放加载上一页",upText:"上拉加载更多",upLoadText:"释放加载下一页",loadingText:"加载中。。。",listEl:".scroll-main",listItemEl:".scroll-item",canScrollMore:function(){return!0},prevPage:function(){console.log("prevPage")},nextPage:function(){console.log("nextPage")}},e=function(a,b,c){var d=this;d.initialize.call(d,a,b,c)};e.prototype={loadingStep:0,initialize:function(e,f,g){var h=this,i=h.config=a.extend({},c,f),j=h.cfg=a.extend({},d,g),k=a(e);h.$el=k,h.pullDownEl=a(".pullDown",k),h.pullDownLabel=a(".pullDownLabel",h.pullDownEl),h.pullUpEl=a(".pullUp",k),h.pullUpLabel=a(".pullUpLabel",h.pullUpEl),h.pullUpLabel.html(j.upText),h.pullDownLabel.html(j.downText),j.hasPullDown?(j.downElHeihgt=h.pullDownEl.outerHeight(),i.startY=-j.downElHeihgt):h.pullDownEl.addClass("hide"),j.hasPullUp?j.upElHeight=h.pullUpEl.outerHeight():h.pullUpEl.addClass("hide"),h.scroll=new b(k[0],i),h.addEvent(),h.change(),h.pullDownEl.removeClass("hidden"),h.pullUpEl.removeClass("hidden")},addEvent:function(){var a=this,b=a.scroll,c=a.cfg,d=a.config;b.on("scrollStart",function(){}),b.on("scroll",function(){var b=2!=a.loadingStep&&!a.pullDownEl.attr("class").match("loading")&&!a.pullUpEl.attr("class").match("loading");if(b)if(this.y>d.startY){if(!c.hasPullDown)return;this.y>d.startY+c.pullHeight?(a.pullDownEl.addClass("flip"),a.pullDownLabel.html(c.downLoadText),a.loadingStep=1):(a.pullDownEl.removeClass("flip"),a.pullDownLabel.html(c.downText),a.loadingStep=0)}else{if(!c.hasPullUp)return;if(this.y<this.maxScrollY+c.upElHeight-c.pullHeight){if(!c.canScrollMore())return;a.pullUpEl.addClass("flip"),a.pullUpLabel.html(c.upLoadText),a.loadingStep=1}else a.pullUpEl.removeClass("flip"),a.pullUpLabel.html(c.upText),a.loadingStep=0}}),b.on("scrollEnd",function(){return 0==a.loadingStep?void a.reset():void(1==a.loadingStep&&(a.pullUpEl.hasClass("flip")?(a.pullUpEl.removeClass("flip").addClass("loading"),a.pullUpLabel.html(c.loadingText),a.loadingStep=2,c.nextPage()):a.pullDownEl.hasClass("flip")&&(a.pullDownEl.removeClass("flip").addClass("loading"),a.pullDownLabel.html(c.loadingText),a.loadingStep=2,c.prevPage())))})},reset:function(){var a=this,b=a.scroll,c=a.cfg,d=a.config;if(a.loadingStep=0,a.pullUpEl.removeClass("flip").removeClass("loading"),a.pullUpLabel.html(c.upText),a.pullDownEl.removeClass("flip").removeClass("loading"),a.pullDownLabel.html(c.downText),b.y>d.startY)a.scrollTo(0,d.startY);else{var e=b.maxScrollY+c.upElHeight;0!=b.maxScrollY&&b.y<e&&a.scrollTo(0,e)}},change:function(){var a=this;a.reset(),a.cfg.isEmptyScroll&&a.adapt(),a.refresh()},scrollTo:function(b,c,d,e){var f=this,g=f.scroll;d=a.isNumeric(d)||g.options.bounceTime,e=e||g.options.bounceEasing,g.scrollTo(b,c,d,e)},refresh:function(){var a=this;a.scroll.refresh()},adapt:function(){for(var b=this,c=a(b.cfg.listEl,b.$el),d=a(b.cfg.listItemEl,c),e=b.$el.height(),f=(c.height(),0),g=0,h=d.length;h>g;g++)f+=d.eq(g).outerHeight();e>f?c.css("height",e+1):c.css("height","auto")}},window.PullScroll=e}(jQuery,IScroll);